<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Galentineâ€™s Launch ğŸ’–ğŸš€</title>

<style>
:root{
--hot:#ff1fb8;
--hot2:#ff4fd0;
--pink:#ff7bd6;
--baby:#ffd0ee;
--lav:#f2d7ff;
--ink:#240617;

--glass: rgba(255,255,255,.28);
--card: rgba(255,255,255,.68);
--stroke: rgba(255,255,255,.62);

--shadowA: 0 26px 90px rgba(255,31,184,.38);
--shadowB: 0 16px 36px rgba(0,0,0,.18);
--shadowC: 0 18px 0 rgba(140,0,90,.16);
--r: 28px;

--safeTop: env(safe-area-inset-top);
--safeBot: env(safe-area-inset-bottom);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
margin:0;
font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
color:var(--ink);
overflow:hidden;

background:
radial-gradient(1100px 800px at 18% 8%, rgba(255,255,255,.90) 0%, transparent 55%),
radial-gradient(900px 700px at 82% 16%, rgba(255,255,255,.80) 0%, transparent 55%),
radial-gradient(900px 650px at 30% 85%, rgba(255,255,255,.55) 0%, transparent 55%),
linear-gradient(135deg, var(--lav), var(--baby) 30%, var(--pink) 65%, var(--hot2));
}

/* Sparkle dot pattern overlay */
.pattern{
position:fixed; inset:0; pointer-events:none; z-index:0;
opacity:.26;
background-image:
radial-gradient(circle at 20% 30%, rgba(255,255,255,.95) 0 1.5px, transparent 2px),
radial-gradient(circle at 78% 22%, rgba(255,255,255,.9) 0 1.5px, transparent 2px),
radial-gradient(circle at 38% 72%, rgba(255,255,255,.85) 0 1.5px, transparent 2px),
radial-gradient(circle at 88% 80%, rgba(255,255,255,.9) 0 1.5px, transparent 2px);
background-size: 260px 260px;
}

/* Puffy â€œgelâ€ blobs for depth */
.floaters{ position:fixed; inset:0; pointer-events:none; z-index:0; }
.blob{
position:absolute;
width: 320px; height: 320px;
border-radius: 100px;
background:
radial-gradient(140px 140px at 28% 26%, rgba(255,255,255,.95) 0%, rgba(255,255,255,.18) 60%, rgba(255,255,255,0) 72%),
radial-gradient(160px 160px at 70% 75%, rgba(255,255,255,.35) 0%, rgba(255,255,255,0) 62%),
linear-gradient(135deg, rgba(255,31,184,.56), rgba(255,255,255,.22));
border: 1px solid rgba(255,255,255,.65);
box-shadow:
0 44px 130px rgba(0,0,0,.14),
0 26px 90px rgba(255,31,184,.20);
filter: saturate(1.15);
animation: drift 10s ease-in-out infinite;
}
.b1{ left:-140px; top:70px; transform: rotate(12deg); animation-duration: 12s; }
.b2{ right:-170px; top:160px; width: 380px; height:380px; border-radius: 120px; transform: rotate(-10deg); animation-duration: 14s; }
.b3{ left:40px; bottom:-210px; width: 460px; height:460px; border-radius: 150px; transform: rotate(8deg); animation-duration: 16s; }
@keyframes drift{ 0%,100%{ translate: 0 0; } 50%{ translate: 0 -22px; } }

/* App container */
.app{
position:relative;
z-index:1;
height:100%;
display:flex;
flex-direction:column;
padding-top: calc(10px + var(--safeTop));
padding-bottom: calc(10px + var(--safeBot));
}

/* Top bar */
.topbar{
display:flex;
align-items:center;
justify-content:space-between;
gap:10px;
padding: 10px 14px;
}
.chip{
display:inline-flex; align-items:center; gap:8px;
padding:10px 14px;
border-radius:999px;
background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.58));
border: 1px solid rgba(255,255,255,.72);
box-shadow: 0 14px 30px rgba(0,0,0,.10), 0 18px 50px rgba(255,31,184,.18);
font-weight: 1000;
position:relative;
overflow:hidden;
user-select:none;
-webkit-tap-highlight-color: transparent;
}
.chip:after{
content:"";
position:absolute; inset:-40% -60%;
background: linear-gradient(120deg, transparent 40%, rgba(255,255,255,.55) 50%, transparent 60%);
transform: rotate(8deg) translateX(-60%);
animation: sweep 5.2s ease-in-out infinite;
opacity:.65;
pointer-events:none;
}
@keyframes sweep{ 0%{ transform: rotate(8deg) translateX(-60%);} 55%{ transform: rotate(8deg) translateX(60%);} 100%{ transform: rotate(8deg) translateX(60%);} }

.soundBtn{
display:inline-flex; align-items:center; gap:8px;
padding:10px 14px;
border-radius:999px;
border: 1px solid rgba(255,255,255,.72);
background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.54));
box-shadow: 0 14px 30px rgba(0,0,0,.10);
font-weight:1000;
cursor:pointer;
-webkit-tap-highlight-color: transparent;
user-select:none;
}
.soundDot{
width:10px; height:10px; border-radius:999px;
background: rgba(0,0,0,.22);
box-shadow: 0 0 0 6px rgba(255,31,184,.14);
}
.soundOn .soundDot{ background: #17ff7a; box-shadow: 0 0 0 6px rgba(23,255,122,.16); }

/* Carousel */
.viewport{
flex:1;
overflow:hidden;
padding: 10px 14px;
}
.track{
height:100%;
display:flex;
gap:14px;
overflow-x:auto;
scroll-snap-type: x mandatory;
-webkit-overflow-scrolling: touch;
scroll-behavior:smooth;
padding-bottom: 10px;
}
.track::-webkit-scrollbar{ display:none; }

.slide{
flex: 0 0 100%;
scroll-snap-align: center;
height:100%;
display:flex;
flex-direction:column;
gap:12px;
}

/* Main card with tilt */
.card{
position:relative;
background: var(--card);
border: 1px solid rgba(255,255,255,.72);
border-radius: var(--r);
box-shadow: var(--shadowA);
padding: 18px;
overflow:hidden;
transform: perspective(900px) rotateX(var(--rx, 0deg)) rotateY(var(--ry, 0deg));
transition: transform 120ms ease;
will-change: transform;
}
.card:before{
content:"";
position:absolute; inset:0;
border-radius: inherit;
pointer-events:none;
background:
radial-gradient(900px 320px at 20% 0%, rgba(255,255,255,.88), transparent 55%),
radial-gradient(700px 260px at 90% 10%, rgba(255,255,255,.55), transparent 60%);
opacity:.95;
mix-blend-mode: screen;
}

/* Header typography */
h1{
margin:0;
font-size: clamp(34px, 7vw, 56px);
line-height:1.02;
letter-spacing:-.9px;
position:relative;
z-index:2;
text-shadow: 0 2px 0 rgba(255,255,255,.55);
}
.sub{
margin:10px 0 0;
font-size: 16px;
line-height:1.55;
opacity:.95;
position:relative;
z-index:2;
max-width: 60ch;
}

/* Hero stage */
.stage{
position:relative;
min-height: 280px;
margin-top: 14px;
border-radius: 24px;
background:
radial-gradient(240px 140px at 25% 18%, rgba(255,255,255,.45), transparent 60%),
radial-gradient(320px 220px at 85% 75%, rgba(255,255,255,.24), transparent 65%),
linear-gradient(135deg, rgba(255,255,255,.32), rgba(255,255,255,.12));
border: 1px solid rgba(255,255,255,.52);
box-shadow: var(--shadowB);
overflow:hidden;
z-index:2;
}

/* Neon green accent stripe */
.neon{
position:absolute;
left:-20%;
top:22%;
width:160%;
height:28px;
transform: rotate(-10deg);
background: linear-gradient(90deg, transparent, rgba(23,255,122,.8), transparent);
opacity:.40;
filter: blur(0.2px);
}

/* Floating 3D assets */
.asset{
position:absolute;
width: 150px;
height:auto;
filter: drop-shadow(0 22px 28px rgba(0,0,0,.22));
transform: translate3d(0,0,0);
animation: floatA 6.6s ease-in-out infinite;
user-select:none;
pointer-events:none;
}
.asset.small{ width: 96px; animation-duration: 7.4s; }
.asset.tiny{ width: 70px; animation-duration: 8.1s; }

@keyframes floatA{ 0%,100%{ translate:0 0; } 50%{ translate:0 -14px; } }

.a-hero{ left: 50%; top: 50%; transform: translate(-50%,-50%); width: 190px; animation-duration: 6.2s; }
.a-radio{ left: 10%; top: 56%; width: 130px; animation-duration: 7.2s; }
.a-cd1{ left: 68%; top: 18%; width: 120px; animation-duration: 7.8s; }
.a-cd2{ left: 16%; top: 16%; width: 90px; animation-duration: 8.2s; }
.a-heart{ left: 76%; top: 62%; width: 90px; animation-duration: 6.8s; }
.a-star{ left: 38%; top: 10%; width: 76px; animation-duration: 7.1s; }
.a-flower{ left: 6%; top: 70%; width: 86px; animation-duration: 8.6s; }

/* Pills and 3D buttons */
.pills{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 12px; position:relative; z-index:2; }
.pill{
padding:10px 12px;
border-radius:999px;
font-weight:1100;
font-size:14px;
background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.58));
border: 1px solid rgba(255,255,255,.75);
box-shadow: var(--shadowB);
}

.btnRow{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 14px; position:relative; z-index:2; }

.btn3d{
display:inline-flex; align-items:center; justify-content:center; gap:10px;
padding:14px 16px;
border-radius: 18px;
text-decoration:none;
font-weight: 1200;
border: 1px solid rgba(255,255,255,.55);
box-shadow: var(--shadowC), 0 18px 45px rgba(0,0,0,.16);
transform: translateY(0);
transition: transform .12s ease, box-shadow .12s ease;
user-select:none;
-webkit-tap-highlight-color: transparent;
cursor:pointer;
position:relative;
overflow:hidden;
}
.btn3d.primary{
color:#fff;
background:
radial-gradient(180px 90px at 25% 20%, rgba(255,255,255,.35), transparent 55%),
linear-gradient(180deg, var(--hot), var(--hot2));
}
.btn3d.ghost{
color: var(--ink);
background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.62));
}
.btn3d:active{
transform: translateY(8px);
box-shadow: 0 8px 0 rgba(140,0,90,.16), 0 12px 26px rgba(0,0,0,.14);
}
.btn3d:after{
content:"";
position:absolute; inset:-40% -60%;
background: linear-gradient(120deg, transparent 40%, rgba(255,255,255,.45) 50%, transparent 60%);
transform: rotate(8deg) translateX(-60%);
animation: sweep 4.8s ease-in-out infinite;
opacity:.65;
pointer-events:none;
}

/* Countdown */
.countdown{ display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; margin-top:12px; position:relative; z-index:2; }
.timebox{
border-radius: 18px;
padding: 12px 10px;
text-align:center;
background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.62));
border: 1px solid rgba(255,255,255,.78);
box-shadow: var(--shadowB);
}
.num{ font-size: 24px; font-weight: 1300; letter-spacing:-.4px; }
.lab{ font-size:12px; font-weight: 1100; opacity:.86; letter-spacing:.9px; text-transform:uppercase; margin-top:3px; }

/* Options UI */
.sectionTitle{
margin: 12px 0 8px;
font-size: 18px;
font-weight: 1300;
letter-spacing:-.2px;
position:relative;
z-index:2;
}
.options{ display:flex; flex-wrap:wrap; gap:10px; position:relative; z-index:2; }

.opt{
display:inline-flex;
align-items:center;
gap:10px;
padding: 12px 14px;
border-radius: 999px;
background:
radial-gradient(160px 90px at 30% 20%, rgba(255,255,255,.55), transparent 55%),
linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.60));
border: 1px solid rgba(255,255,255,.78);
box-shadow: 0 16px 0 rgba(120,0,80,.12), var(--shadowB);
font-weight: 1200;
cursor:pointer;
user-select:none;
-webkit-tap-highlight-color: transparent;
transition: transform .12s ease, box-shadow .12s ease;
}
.opt:active{
transform: translateY(7px);
box-shadow: 0 8px 0 rgba(120,0,80,.12), 0 12px 26px rgba(0,0,0,.14);
}
.opt input{ display:none; }
.opt[data-on="1"]{
outline: 3px solid rgba(23,255,122,.45);
box-shadow: 0 16px 0 rgba(23,255,122,.16), 0 18px 45px rgba(0,0,0,.16);
}

/* Inputs */
label.small{ display:block; margin: 10px 0 6px; font-weight:1300; position:relative; z-index:2; }
input.text, textarea.text{
width:100%;
border-radius: 18px;
border: 1px solid rgba(255,255,255,.78);
padding: 12px 12px;
font-size: 15px;
background: rgba(255,255,255,.82);
box-shadow: var(--shadowB);
outline:none;
position:relative;
z-index:2;
}
textarea.text{ min-height: 96px; resize: vertical; }

/* Progress + nav */
.nav{
padding: 4px 14px 10px;
display:flex;
gap:10px;
align-items:center;
justify-content:space-between;
}
.dots{ display:flex; gap:8px; align-items:center; }
.dot{
width:10px; height:10px; border-radius:999px;
background: rgba(255,255,255,.55);
border: 1px solid rgba(255,255,255,.75);
box-shadow: 0 10px 18px rgba(0,0,0,.10);
}
.dot.on{ background: rgba(23,255,122,.85); }

/* Loading screen */
.loading{
position:fixed; inset:0; z-index:50;
display:flex; flex-direction:column; align-items:center; justify-content:center;
gap:14px;
background:
radial-gradient(900px 700px at 20% 10%, rgba(255,255,255,.85) 0%, transparent 55%),
linear-gradient(135deg, var(--lav), var(--baby) 30%, var(--pink) 65%, var(--hot2));
}
.loadCard{
width:min(520px, 92vw);
border-radius: 30px;
padding: 18px;
background: rgba(255,255,255,.62);
border: 1px solid rgba(255,255,255,.76);
box-shadow: var(--shadowA);
text-align:center;
position:relative;
overflow:hidden;
}
.loadCard:before{
content:"";
position:absolute; inset:0;
background:
radial-gradient(700px 260px at 20% 0%, rgba(255,255,255,.85), transparent 55%),
radial-gradient(700px 260px at 90% 10%, rgba(255,255,255,.55), transparent 60%);
opacity:.9;
pointer-events:none;
mix-blend-mode: screen;
}
.loadTitle{
font-size: 28px;
font-weight: 1400;
letter-spacing:-.6px;
margin: 0;
position:relative;
z-index:2;
}
.loadSub{
margin: 8px 0 0;
opacity:.92;
position:relative;
z-index:2;
font-weight: 1100;
}
.bar{
margin: 14px auto 0;
height: 14px;
width: 100%;
border-radius: 999px;
background: rgba(255,255,255,.55);
border: 1px solid rgba(255,255,255,.76);
overflow:hidden;
position:relative;
z-index:2;
box-shadow: var(--shadowB);
}
.bar > i{
display:block;
height:100%;
width: 35%;
border-radius: 999px;
background: linear-gradient(90deg, rgba(23,255,122,.85), rgba(255,31,184,.85));
animation: loadMove 1.05s ease-in-out infinite;
}
@keyframes loadMove{
0%{ transform: translateX(-20%); width: 30%; }
50%{ transform: translateX(65%); width: 45%; }
100%{ transform: translateX(-20%); width: 30%; }
}

/* Confetti/hearts layer */
.fx{
position:fixed; inset:0; pointer-events:none; z-index:40;
overflow:hidden;
}
.fx span{
position:absolute;
font-size: 18px;
filter: drop-shadow(0 10px 12px rgba(0,0,0,.18));
animation: popFly 900ms ease-out forwards;
opacity:0;
}
@keyframes popFly{
0%{ transform: translate(0,0) scale(.6); opacity:0; }
15%{ opacity:1; }
100%{ transform: translate(var(--dx), var(--dy)) rotate(var(--rot)) scale(1.1); opacity:0; }
}

/* Results */
.resultsGrid{
display:grid;
gap:10px;
position:relative;
z-index:2;
}
.meter{
border-radius: 18px;
padding: 12px;
background: rgba(255,255,255,.78);
border: 1px solid rgba(255,255,255,.82);
box-shadow: var(--shadowB);
overflow:hidden;
position:relative;
}
.meterTop{
display:flex; justify-content:space-between; gap:10px; align-items:baseline;
font-weight:1300;
}
.meterTop small{ opacity:.85; font-weight:1100; }
.rail{
margin-top:10px;
height: 16px;
border-radius: 999px;
background: rgba(0,0,0,.08);
overflow:hidden;
border: 1px solid rgba(255,255,255,.65);
}
.fill{
height:100%;
width:0%;
border-radius: 999px;
background: linear-gradient(90deg, rgba(23,255,122,.85), rgba(255,31,184,.85));
transition: width 520ms ease;
}
.tinyNote{
margin-top:10px;
opacity:.92;
font-weight:1100;
position:relative;
z-index:2;
}/* === PATCH: mobile slide scrolling + iOS viewport fix === */
html, body { height: 100%; overflow: hidden; }

/* iOS dynamic viewport */
:root { --vh: 100dvh; }

/* Make each slide scrollable without breaking swipe */
.slide, .swiper-slide {
  height: var(--vh);
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  padding-bottom: max(18px, env(safe-area-inset-bottom));
}

/* Keep content readable */
@media (max-width: 480px) {
  body { font-size: 16px; }
  h1 { font-size: 34px; line-height: 1.05; }
  h2 { font-size: 22px; }
}
</style>
</head>

<body>
<div class="pattern" aria-hidden="true"></div>
<div class="floaters" aria-hidden="true">
<div class="blob b1"></div>
<div class="blob b2"></div>
<div class="blob b3"></div>
</div>

<!-- Hype loading screen -->
<div class="loading" id="loading">
<div class="loadCard">
<h2 class="loadTitle">Launching Galentineâ€™sâ€¦ ğŸ’–ğŸš€</h2>
<div class="loadSub">Loading the drop: chrome + CDs + chaos</div>
<div class="bar"><i></i></div>
</div>
</div>

<div class="fx" id="fx"></div>

<div class="app">
<div class="topbar">
<div class="chip">ğŸ’¿ Galentineâ€™s Launch</div>
<button class="soundBtn" id="soundBtn" type="button" aria-label="Toggle sound" data-sound-toggle>
<span class="soundDot" aria-hidden="true"></span>
<span id="soundLabel" data-sound-label>Sound: OFF</span>
</button>
</div>

<div class="viewport">
<div class="track" id="track">
<!-- Slide 1 -->
<section class="slide">
<div class="card tilt">
<h1>Valentineâ€™s Day<br>for the Girlies ğŸ’˜</h1>
<p class="sub">This is a limited drop. If youâ€™re coming, say it with your chest. ğŸ’…</p>

<div class="stage" id="stage1">
<div class="neon"></div>

<!-- Replace these with your generated assets in /assets -->
<img class="asset a-hero" src="assets/hero-phone.png" alt="" />
<img class="asset a-radio" src="assets/radio.png" alt="" />
<img class="asset a-cd1" src="assets/cd1.png" alt="" />
<img class="asset asset small a-cd2" src="assets/cd2.png" alt="" />
<img class="asset asset small a-heart" src="assets/chrome-heart.png" alt="" />
<img class="asset asset tiny a-star" src="assets/star.png" alt="" />
<img class="asset asset tiny a-flower" src="assets/flower.png" alt="" />
</div>

<div class="btnRow">
<button class="btn3d primary" type="button" id="startBtn">Tap to Enter ğŸ’–</button>
<button class="btn3d ghost" type="button" id="peekBtn">Peek the Deets ğŸ‘€</button>
</div>
</div>
</section>

<!-- Slide 2 -->
<section class="slide">
<div class="card tilt">
<h1>The Deets âœ¨</h1>
<p class="sub">Bring something homemade or bought. Either way, bring your best energy.</p>

<div class="pills">
<div class="pill">ğŸ“… Feb 13</div>
<div class="pill">ğŸ•‘ 2:00 PM</div>
<div class="pill">ğŸ“ Jersey City</div>
<div class="pill">ğŸ“ Potluck / Buy-luck</div>
</div>

<div class="sectionTitle" style="margin-top:14px;">Countdown â³</div>
<div class="countdown">
<div class="timebox"><div class="num" id="dd">--</div><div class="lab">Days</div></div>
<div class="timebox"><div class="num" id="hh">--</div><div class="lab">Hours</div></div>
<div class="timebox"><div class="num" id="mm">--</div><div class="lab">Min</div></div>
<div class="timebox"><div class="num" id="ss">--</div><div class="lab">Sec</div></div>
</div>

<div class="btnRow">
<button class="btn3d primary" type="button" id="toVote">Next: Vote ğŸ’¿</button>
<button class="btn3d ghost" type="button" id="back1">Back</button>
</div>
</div>
</section>

<!-- Slide 3 -->
<section class="slide">
<div class="card tilt">
<h1>Vote Like a Popstar ğŸ¤</h1>
<p class="sub">Tap choices. They should feel like stickersâ€”because they are.</p>

<div class="sectionTitle">Activity (pick any)</div>
<div class="options" data-group="activity">
<div class="opt" data-type="check" data-name="activity" data-value="Brunch">ğŸ³ Brunch</div>
<div class="opt" data-type="check" data-name="activity" data-value="Karaoke">ğŸ¤ Karaoke</div>
<div class="opt" data-type="check" data-name="activity" data-value="Spa">ğŸ§–â€â™€ï¸ Spa</div>
<div class="opt" data-type="check" data-name="activity" data-value="Game night">ğŸ² Game night</div>
</div>

<div class="sectionTitle">Drinks (pick one)</div>
<div class="options" data-group="drinks">
<div class="opt" data-type="radio" data-name="drinks" data-value="Mocktails">ğŸ“ Mocktails</div>
<div class="opt" data-type="radio" data-name="drinks" data-value="Cocktails">ğŸ¥‚ Cocktails</div>
<div class="opt" data-type="radio" data-name="drinks" data-value="Both">âœ¨ Both</div>
</div>

<div class="sectionTitle">Outfit / Theme (pick any)</div>
<div class="options" data-group="outfit">
<div class="opt" data-type="check" data-name="outfit" data-value="All pink everything">ğŸ’– All pink</div>
<div class="opt" data-type="check" data-name="outfit" data-value="Red + pink">ğŸ’‹ Red + pink</div>
<div class="opt" data-type="check" data-name="outfit" data-value="Cozy slay">ğŸ§¸ Cozy slay</div>
<div class="opt" data-type="check" data-name="outfit" data-value="Y2K glam">ğŸ’¿ Y2K glam</div>
</div>

<div class="btnRow">
<button class="btn3d primary" type="button" id="toExtras">Next: Extras âœ¨</button>
<button class="btn3d ghost" type="button" id="back2">Back</button>
</div>
</div>
</section>

<!-- Slide 4 -->
<section class="slide">
<div class="card tilt">
<h1>Extras ğŸ˜‡</h1>
<p class="sub">Be honest. Are you bringing a +1? And what are you contributing to the snack economy?</p>

<label class="small">Plus one?</label>
<div class="options" data-group="plusone">
<div class="opt" data-type="radio" data-name="plusone" data-value="No plus one">No +1</div>
<div class="opt" data-type="radio" data-name="plusone" data-value="Yes +1">Yes +1</div>
</div>

<label class="small" for="bring">What are you bringing? (Potluck / Buy-luck)</label>
<input class="text" id="bring" type="text" placeholder="cupcakes / chips / fruit / drinks / vibes" />

<label class="small" for="notes">Notes / allergies / song request</label>
<textarea class="text" id="notes" placeholder="Drop the tea hereâ€¦ respectfully."></textarea>

<div class="btnRow">
<button class="btn3d primary" type="button" id="toRsvp">Next: RSVP ğŸ’Œ</button>
<button class="btn3d ghost" type="button" id="back3">Back</button>
</div>
</div>
</section>

<!-- Slide 5 -->
<section class="slide">
<div class="card tilt">
<h1>RSVP ğŸ’Œ</h1>
<p class="sub">Submit it. Then check the live vote results like itâ€™s the Billboard charts.</p>

<label class="small" for="name">Your name *</label>
<input class="text" id="name" type="text" placeholder="Nia / Kayla / Queen ğŸ‘‘" required />

<div class="sectionTitle">RSVP status *</div>
<div class="options" data-group="status">
<div class="opt" data-type="radio" data-name="status" data-value="Iâ€™m in ğŸ’–">Iâ€™m in ğŸ’–</div>
<div class="opt" data-type="radio" data-name="status" data-value="Maybe ğŸ¤">Maybe ğŸ¤</div>
<div class="opt" data-type="radio" data-name="status" data-value="Canâ€™t ğŸ˜­">Canâ€™t ğŸ˜­</div>
</div>

<div class="btnRow">
<button class="btn3d primary" type="button" id="submitBtn">Submit RSVP ğŸ’–</button>
<button class="btn3d ghost" type="button" id="refreshResults">Refresh Results</button>
</div>

<div class="tinyNote" id="saveMsg" style="display:none;">Saved ğŸ’– If you change your mind, submit again.</div>

<div class="sectionTitle" style="margin-top:14px;">Live Results ğŸ“Š</div>
<div class="resultsGrid" id="resultsGrid">
<div class="meter">
<div class="meterTop"><span>Total RSVPs</span><small id="totalCount">0</small></div>
<div class="rail"><div class="fill" id="totalFill"></div></div>
</div>
<div class="meter">
<div class="meterTop"><span>Top Activity</span><small id="topActivity">â€”</small></div>
<div class="rail"><div class="fill" id="activityFill"></div></div>
</div>
<div class="meter">
<div class="meterTop"><span>Top Drink</span><small id="topDrink">â€”</small></div>
<div class="rail"><div class="fill" id="drinksFill"></div></div>
</div>
<div class="meter">
<div class="meterTop"><span>Top Outfit</span><small id="topOutfit">â€”</small></div>
<div class="rail"><div class="fill" id="outfitFill"></div></div>
</div>
</div>

<div class="tinyNote" id="detailDump"></div>
</div>

<!-- Hidden iframe form POST (reliable, no CORS issues) -->
<form id="hiddenForm"
method="POST"
action="https://script.google.com/macros/s/AKfycbzc_x8_hAQSXUCZnyyRHsVb_anqCFrO2NhV2NwaomycAAHL7t-sgfsErnzxaTmey9BpCw/exec"
target="sink"
style="display:none;">
<input name="name" id="f_name" />
<input name="status" id="f_status" />
<input name="availability" id="f_availability" />
<input name="drinks" id="f_drinks" />
<input name="plusone" id="f_plusone" />
<input name="bring" id="f_bring" />
<input name="notes" id="f_notes" />
<!-- checkboxes -->
<div id="checks"></div>

<!-- metadata -->
<input type="hidden" name="event" value="Galentineâ€™s Day" />
<input type="hidden" name="host" value="Aminah" />
<input type="hidden" name="city" value="Jersey City" />
<input type="hidden" name="datetime" value="Feb 13 @ 2:00 PM" />
</form>
<iframe name="sink" style="display:none"></iframe>
</section>
</div>
</div>

<div class="nav">
<div class="dots" id="dots"></div>
<div class="chip" id="stepLabel">Step 1 / 5</div>
</div>
</div>

<script>
// === CONFIG ===
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzc_x8_hAQSXUCZnyyRHsVb_anqCFrO2NhV2NwaomycAAHL7t-sgfsErnzxaTmey9BpCw/exec";
const EVENT_LOCAL = { month: 2, day: 13, hour: 14, minute: 0 }; // Feb=2 in human, we'll handle below

// === LOADING SCREEN (L1) ===
const loading = document.getElementById('loading');
setTimeout(() => {
loading.style.opacity = "0";
loading.style.transition = "opacity 220ms ease";
setTimeout(() => loading.remove(), 260);
}, 900);

// === SOUND (toggle, WebAudio so you donâ€™t need mp3 files) ===
let soundOn = false;
const soundBtn = document.getElementById('soundBtn');
const soundLabel = document.getElementById('soundLabel');
let audioCtx = null;

function ensureAudio(){
if(!audioCtx){
audioCtx = new (window.AudioContext || window.webkitAudioContext)();
}
if(audioCtx.state === "suspended") audioCtx.resume();
}

function blip(freq=520, ms=60, type="sine", gain=0.045){
if(!soundOn) return;
ensureAudio();
const t0 = audioCtx.currentTime;
const o = audioCtx.createOscillator();
const g = audioCtx.createGain();
o.type = type;
o.frequency.value = freq;
g.gain.setValueAtTime(0.0001, t0);
g.gain.exponentialRampToValueAtTime(gain, t0 + 0.01);
g.gain.exponentialRampToValueAtTime(0.0001, t0 + ms/1000);
o.connect(g).connect(audioCtx.destination);
o.start(t0);
o.stop(t0 + ms/1000);
}

function sparkle(){
if(!soundOn) return;
blip(740, 70, "triangle", 0.04);
setTimeout(()=>blip(980, 60, "sine", 0.035), 60);
setTimeout(()=>blip(1220, 70, "triangle", 0.03), 120);
}

soundBtn.addEventListener('click', () => {
soundOn = !soundOn;
soundBtn.classList.toggle('soundOn', soundOn);
soundLabel.textContent = soundOn ? "Sound: On" : "Sound: Off";
blip(420, 80, "sine", 0.05);
});

// === SWIPE + BUTTON NAV (S2) ===
const track = document.getElementById('track');
const slides = Array.from(document.querySelectorAll('.slide'));
const dots = document.getElementById('dots');
const stepLabel = document.getElementById('stepLabel');

slides.forEach((_, i) => {
const d = document.createElement('div');
d.className = 'dot' + (i===0 ? ' on' : '');
dots.appendChild(d);
d.addEventListener('click', () => goTo(i));
});

function currentIndex(){
const x = track.scrollLeft;
const w = track.clientWidth + 14; // gap
return Math.round(x / w);
}

function setUI(i){
Array.from(dots.children).forEach((el, idx) => el.classList.toggle('on', idx===i));
stepLabel.textContent = `Step ${i+1} / ${slides.length}`;
}

function goTo(i){
const w = track.clientWidth + 14;
track.scrollTo({ left: i * w, behavior: 'smooth' });
setUI(i);
}

track.addEventListener('scroll', () => {
const i = currentIndex();
setUI(i);
}, { passive:true });

// Buttons
document.getElementById('startBtn').addEventListener('click', () => {
sparkle(); burstFX(22);
goTo(1);
});
document.getElementById('peekBtn').addEventListener('click', () => { blip(520); goTo(1); });
document.getElementById('toVote').addEventListener('click', () => { blip(560); goTo(2); });
document.getElementById('toExtras').addEventListener('click', () => { blip(560); goTo(3); });
document.getElementById('toRsvp').addEventListener('click', () => { blip(560); goTo(4); });

document.getElementById('back1').addEventListener('click', () => { blip(440); goTo(0); });
document.getElementById('back2').addEventListener('click', () => { blip(440); goTo(1); });
document.getElementById('back3').addEventListener('click', () => { blip(440); goTo(2); });

// === OPTIONS (pressable stickers) ===
const state = {
activity: new Set(),
outfit: new Set(),
drinks: "",
plusone: "",
status: ""
};

function toggleOpt(el){
const type = el.dataset.type;
const name = el.dataset.name;
const val = el.dataset.value;

if(type === "check"){
const set = state[name];
if(set.has(val)){ set.delete(val); el.dataset.on="0"; blip(420); }
else{ set.add(val); el.dataset.on="1"; sparkle(); }
} else {
// radio
state[name] = val;
// clear siblings in same group
const parent = el.parentElement;
Array.from(parent.querySelectorAll('.opt')).forEach(o => o.dataset.on = (o===el ? "1" : "0"));
sparkle();
}
}

document.querySelectorAll('.opt').forEach(el => {
el.dataset.on = "0";
el.addEventListener('click', () => toggleOpt(el));
});

// === COUNTDOWN (auto rolls to next year if passed) ===
const dd = document.getElementById('dd');
const hh = document.getElementById('hh');
const mm = document.getElementById('mm');
const ss = document.getElementById('ss');

function getTarget(){
const now = new Date();
const year = now.getFullYear();
const targetThisYear = new Date(year, EVENT_LOCAL.month - 1, EVENT_LOCAL.day, EVENT_LOCAL.hour, EVENT_LOCAL.minute, 0);
return (targetThisYear - now > 0) ? targetThisYear : new Date(year + 1, EVENT_LOCAL.month - 1, EVENT_LOCAL.day, EVENT_LOCAL.hour, EVENT_LOCAL.minute, 0);
}
let target = getTarget();

function tick(){
const n = new Date();
let diff = target - n;
if(diff < 0) { target = getTarget(); diff = target - n; }

const d = Math.floor(diff / (1000*60*60*24));
diff -= d*(1000*60*60*24);
const h = Math.floor(diff / (1000*60*60));
diff -= h*(1000*60*60);
const m = Math.floor(diff / (1000*60));
diff -= m*(1000*60);
const s = Math.floor(diff / 1000);

dd.textContent = d;
hh.textContent = h;
mm.textContent = m;
ss.textContent = s;
}
tick();
setInterval(tick, 1000);

// === TILT / PARALLAX (C4) ===
const tilts = Array.from(document.querySelectorAll('.tilt'));
let tiltRX = 0, tiltRY = 0;

function applyTilt(){
tilts.forEach(card => {
card.style.setProperty('--rx', `${tiltRX}deg`);
card.style.setProperty('--ry', `${tiltRY}deg`);
});
}

// Device orientation (mobile)
window.addEventListener('deviceorientation', (e) => {
// beta: front/back, gamma: left/right
const g = Math.max(-18, Math.min(18, e.gamma || 0));
const b = Math.max(-18, Math.min(18, e.beta || 0));
tiltRY = g * 0.18;
tiltRX = (b - 10) * 0.12;
applyTilt();
}, { passive:true });

// Mouse fallback (desktop)
window.addEventListener('mousemove', (e) => {
const x = (e.clientX / window.innerWidth) - 0.5;
const y = (e.clientY / window.innerHeight) - 0.5;
tiltRY = x * 6;
tiltRX = -y * 5;
applyTilt();
}, { passive:true });

// === CONFETTI / HEARTS (C5) ===
const fx = document.getElementById('fx');
function burstFX(count=18){
const emojis = ["ğŸ’–","âœ¨","ğŸ’¿","ğŸ’˜","ğŸŒ¸","â­ï¸","ğŸ«§","ğŸ’…"];
const cx = Math.random() * window.innerWidth;
const cy = Math.random() * window.innerHeight * 0.6 + 80;

for(let i=0;i<count;i++){
const s = document.createElement('span');
s.textContent = emojis[Math.floor(Math.random()*emojis.length)];
s.style.left = cx + "px";
s.style.top = cy + "px";
const dx = (Math.random()*2 - 1) * 220;
const dy = (Math.random()*-1) * (260 + Math.random()*200);
const rot = (Math.random()*2 - 1) * 240;
s.style.setProperty('--dx', dx + "px");
s.style.setProperty('--dy', dy + "px");
s.style.setProperty('--rot', rot + "deg");
s.style.fontSize = (14 + Math.random()*18) + "px";
fx.appendChild(s);
// trigger animation
requestAnimationFrame(()=>{ s.style.opacity = "1"; });
setTimeout(()=> s.remove(), 950);
}
}

// === SUBMIT RSVP (POST to iframe) ===
const hiddenForm = document.getElementById('hiddenForm');
const checksDiv = document.getElementById('checks');
const saveMsg = document.getElementById('saveMsg');

function setHidden(id, val){ document.getElementById(id).value = val || ""; }

document.getElementById('submitBtn').addEventListener('click', () => {
// validate
const name = document.getElementById('name').value.trim();
if(!name){ burstFX(10); blip(220,90,"sine",0.06); alert("Put your name, bestie ğŸ˜­"); return; }
if(!state.status){ burstFX(10); blip(220,90,"sine",0.06); alert("Pick your RSVP status ğŸ’–"); return; }

// map values
setHidden('f_name', name);
setHidden('f_status', state.status);
setHidden('f_availability', "Feb 13 @ 2PM"); // simple
setHidden('f_drinks', state.drinks);
setHidden('f_plusone', state.plusone);
setHidden('f_bring', document.getElementById('bring').value.trim());
setHidden('f_notes', document.getElementById('notes').value.trim());

// checkbox inputs (Apps Script reads multiple "activity"/"outfit")
checksDiv.innerHTML = "";
for(const v of state.activity){
const i = document.createElement('input');
i.type="hidden"; i.name="activity"; i.value=v;
checksDiv.appendChild(i);
}
for(const v of state.outfit){
const i = document.createElement('input');
i.type="hidden"; i.name="outfit"; i.value=v;
checksDiv.appendChild(i);
}

// submit
sparkle();
burstFX(28);
hiddenForm.submit();
saveMsg.style.display = "block";

// refresh results after a moment
setTimeout(fetchResults, 900);
});

// === RESULTS DASHBOARD (JSONP) ===
const totalCount = document.getElementById('totalCount');
const totalFill = document.getElementById('totalFill');
const topActivity = document.getElementById('topActivity');
const topDrink = document.getElementById('topDrink');
const topOutfit = document.getElementById('topOutfit');
const activityFill = document.getElementById('activityFill');
const drinksFill = document.getElementById('drinksFill');
const outfitFill = document.getElementById('outfitFill');
const detailDump = document.getElementById('detailDump');

function topKey(obj){
let bestK = "â€”", bestV = 0;
for(const k in obj){
if(obj[k] > bestV){ bestV = obj[k]; bestK = k; }
}
return { key: bestK, val: bestV };
}

function pct(n, total){
if(!total) return 0;
return Math.round((n/total)*100);
}

function renderResults(data){
const total = data.total || 0;
totalCount.textContent = String(total);
totalFill.style.width = Math.min(100, total*8) + "%"; // visual only

const a = topKey(data.activity || {});
const d = topKey(data.drinks || {});
const o = topKey(data.outfit || {});

const aPct = pct(a.val, total);
const dPct = pct(d.val, total);
const oPct = pct(o.val, total);

topActivity.textContent = `${a.key} â€” ${a.val} (${aPct}%)`;
topDrink.textContent = `${d.key} â€” ${d.val} (${dPct}%)`;
topOutfit.textContent = `${o.key} â€” ${o.val} (${oPct}%)`;

activityFill.style.width = aPct + "%";
drinksFill.style.width = dPct + "%";
outfitFill.style.width = oPct + "%";

// Optional detail line (counts)
const sTop = topKey(data.status || {});
detailDump.textContent = total
? `Leading status: ${sTop.key} â€” ${sTop.val} (${pct(sTop.val,total)}%).`
: "No votes yet. Be the first icon. ğŸ’…";
}

function fetchResults(){
// JSONP callback
const cb = "cb_" + Math.random().toString(16).slice(2);
window[cb] = (data) => {
renderResults(data || {});
try{ delete window[cb]; }catch(e){ window[cb]=undefined; }
script.remove();
};

const script = document.createElement('script');
script.src = `${WEB_APP_URL}?action=results&callback=${cb}&t=${Date.now()}`;
script.onerror = () => {
detailDump.textContent = "Results couldnâ€™t load (yet). Try refresh.";
script.remove();
};
document.body.appendChild(script);
}

document.getElementById('refreshResults').addEventListener('click', () => {
blip(520); fetchResults();
});

// auto fetch once
setTimeout(fetchResults, 1100);
  /* === PATCH: mobile-safe sound toggle (no external mp3 needed) === */
let __audioCtx, __gain, __osc1, __osc2, __osc3;
let __soundOn = false;

function __startSound() {
  if (!__audioCtx) {
    __audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    __gain = __audioCtx.createGain();
    __gain.gain.value = 0.0;
    __gain.connect(__audioCtx.destination);

    // glossy popstar pad chord
    __osc1 = __audioCtx.createOscillator();
    __osc2 = __audioCtx.createOscillator();
    __osc3 = __audioCtx.createOscillator();
    [__osc1, __osc2, __osc3].forEach(o => { o.type = "sine"; o.connect(__gain); });

    __osc1.frequency.value = 220;     // A3
    __osc2.frequency.value = 277.18;  // C#4-ish
    __osc3.frequency.value = 329.63;  // E4
    __osc1.start(); __osc2.start(); __osc3.start();

    // shimmer
    const lfo = __audioCtx.createOscillator();
    const lfoGain = __audioCtx.createGain();
    lfo.type = "sine";
    lfo.frequency.value = 0.25;
    lfoGain.gain.value = 10;
    lfo.connect(lfoGain);
    lfoGain.connect(__osc1.frequency);
    lfoGain.connect(__osc2.frequency);
    lfo.start();
  }
  if (__audioCtx.state === "suspended") __audioCtx.resume();

  const now = __audioCtx.currentTime;
  __gain.gain.cancelScheduledValues(now);
  __gain.gain.setValueAtTime(__gain.gain.value, now);
  __gain.gain.linearRampToValueAtTime(0.12, now + 0.25);
}

function __stopSound() {
  if (!__audioCtx || !__gain) return;
  const now = __audioCtx.currentTime;
  __gain.gain.cancelScheduledValues(now);
  __gain.gain.setValueAtTime(__gain.gain.value, now);
  __gain.gain.linearRampToValueAtTime(0.0, now + 0.2);
}

function toggleSound() {
  __soundOn = !__soundOn;
  if (__soundOn) __startSound(); else __stopSound();

  const lbl = document.querySelector("[data-sound-label]");
  if (lbl) lbl.textContent = __soundOn ? "Sound: ON" : "Sound: OFF";
}

/* Auto-wire: any element with data-sound-toggle becomes the sound button */
document.addEventListener("click", (e) => {
  const btn = e.target.closest("[data-sound-toggle]");
  if (btn) toggleSound();
});
  /* === PATCH: mobile-safe sound toggle === */
let __audioCtx, __gain, __osc1, __osc2, __osc3;
let __soundOn = false;

function __startSound() {
  if (!__audioCtx) {
    __audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    __gain = __audioCtx.createGain();
    __gain.gain.value = 0;
    __gain.connect(__audioCtx.destination);

    __osc1 = __audioCtx.createOscillator();
    __osc2 = __audioCtx.createOscillator();
    __osc3 = __audioCtx.createOscillator();

    [__osc1, __osc2, __osc3].forEach(o => {
      o.type = "sine";
      o.connect(__gain);
    });

    __osc1.frequency.value = 220;
    __osc2.frequency.value = 277.18;
    __osc3.frequency.value = 329.63;

    __osc1.start(); __osc2.start(); __osc3.start();
  }

  if (__audioCtx.state === "suspended") __audioCtx.resume();

  const t = __audioCtx.currentTime;
  __gain.gain.cancelScheduledValues(t);
  __gain.gain.setValueAtTime(__gain.gain.value, t);
  __gain.gain.linearRampToValueAtTime(0.12, t + 0.25);
}

function __stopSound() {
  if (!__gain || !__audioCtx) return;
  const t = __audioCtx.currentTime;
  __gain.gain.cancelScheduledValues(t);
  __gain.gain.setValueAtTime(__gain.gain.value, t);
  __gain.gain.linearRampToValueAtTime(0, t + 0.2);
}

document.addEventListener("click", (e) => {
  const btn = e.target.closest("[data-sound-toggle]");
  if (!btn) return;

  __soundOn = !__soundOn;
  if (__soundOn) __startSound();
  else __stopSound();

  const lbl = document.querySelector("[data-sound-label]");
  if (lbl) lbl.textContent = __soundOn ? "Sound: ON" : "Sound: OFF";
});
</script>
</body>
</html>
