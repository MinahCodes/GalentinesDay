<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Galentineâ€™s Launch ğŸ’–ğŸš€</title>

<style>
:root{
Â Â --hot:#ff1fb8;
Â Â --hot2:#ff4fd0;
Â Â --pink:#ff7bd6;
Â Â --baby:#ffd0ee;
Â Â --lav:#f2d7ff;
Â Â --ink:#240617;

Â Â --glass: rgba(255,255,255,.28);
Â Â --card: rgba(255,255,255,.68);
Â Â --stroke: rgba(255,255,255,.62);

Â Â --shadowA: 0 26px 90px rgba(255,31,184,.38);
Â Â --shadowB: 0 16px 36px rgba(0,0,0,.18);
Â Â --shadowC: 0 18px 0 rgba(140,0,90,.16);
Â Â --r: 28px;

Â Â --safeTop: env(safe-area-inset-top);
Â Â --safeBot: env(safe-area-inset-bottom);

Â Â /* JS sets this to window.innerHeight + 'px' */
Â Â --vh: 100dvh;
}

*{box-sizing:border-box}
html,body{height:100%}

body{
Â Â margin:0;
Â Â font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
Â Â color:var(--ink);
Â Â overflow:hidden; /* keep story mode (no full-page scroll) */

Â Â background:
Â Â Â Â radial-gradient(1100px 800px at 18% 8%, rgba(255,255,255,.90) 0%, transparent 55%),
Â Â Â Â radial-gradient(900px 700px at 82% 16%, rgba(255,255,255,.80) 0%, transparent 55%),
Â Â Â Â radial-gradient(900px 650px at 30% 85%, rgba(255,255,255,.55) 0%, transparent 55%),
Â Â Â Â linear-gradient(135deg, var(--lav), var(--baby) 30%, var(--pink) 65%, var(--hot2));
}

/* Sparkle dot pattern overlay */
.pattern{
Â Â position:fixed; inset:0; pointer-events:none; z-index:0;
Â Â opacity:.26;
Â Â background-image:
Â Â Â Â radial-gradient(circle at 20% 30%, rgba(255,255,255,.95) 0 1.5px, transparent 2px),
Â Â Â Â radial-gradient(circle at 78% 22%, rgba(255,255,255,.9) 0 1.5px, transparent 2px),
Â Â Â Â radial-gradient(circle at 38% 72%, rgba(255,255,255,.85) 0 1.5px, transparent 2px),
Â Â Â Â radial-gradient(circle at 88% 80%, rgba(255,255,255,.9) 0 1.5px, transparent 2px);
Â Â background-size: 260px 260px;
}

/* Puffy â€œgelâ€ blobs for depth */
.floaters{ position:fixed; inset:0; pointer-events:none; z-index:0; }
.blob{
Â Â position:absolute;
Â Â width: 320px; height: 320px;
Â Â border-radius: 100px;
Â Â background:
Â Â Â Â radial-gradient(140px 140px at 28% 26%, rgba(255,255,255,.95) 0%, rgba(255,255,255,.18) 60%, rgba(255,255,255,0) 72%),
Â Â Â Â radial-gradient(160px 160px at 70% 75%, rgba(255,255,255,.35) 0%, rgba(255,255,255,0) 62%),
Â Â Â Â linear-gradient(135deg, rgba(255,31,184,.56), rgba(255,255,255,.22));
Â Â border: 1px solid rgba(255,255,255,.65);
Â Â box-shadow:
Â Â Â Â 0 44px 130px rgba(0,0,0,.14),
Â Â Â Â 0 26px 90px rgba(255,31,184,.20);
Â Â filter: saturate(1.15);
Â Â animation: drift 10s ease-in-out infinite;
}
.b1{ left:-140px; top:70px; transform: rotate(12deg); animation-duration: 12s; }
.b2{ right:-170px; top:160px; width: 380px; height:380px; border-radius: 120px; transform: rotate(-10deg); animation-duration: 14s; }
.b3{ left:40px; bottom:-210px; width: 460px; height:460px; border-radius: 150px; transform: rotate(8deg); animation-duration: 16s; }
@keyframes drift{ 0%,100%{ translate: 0 0; } 50%{ translate: 0 -22px; } }

/* App container */
.app{
Â Â position:relative;
Â Â z-index:1;

Â Â /* CRITICAL: use JS-controlled viewport height for small iPhones */
Â Â height: var(--vh);

Â Â display:flex;
Â Â flex-direction:column;
Â Â padding-top: calc(10px + var(--safeTop));
Â Â padding-bottom: calc(10px + var(--safeBot));

Â Â /* CRITICAL for scrollable flex children */
Â Â min-height: 0;
}

/* Top bar */
.topbar{
Â Â display:flex;
Â Â align-items:center;
Â Â justify-content:space-between;
Â Â gap:10px;
Â Â padding: 10px 14px;
}
.chip{
Â Â display:inline-flex; align-items:center; gap:8px;
Â Â padding:10px 14px;
Â Â border-radius:999px;
Â Â background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.58));
Â Â border: 1px solid rgba(255,255,255,.72);
Â Â box-shadow: 0 14px 30px rgba(0,0,0,.10), 0 18px 50px rgba(255,31,184,.18);
Â Â font-weight: 1000;
Â Â position:relative;
Â Â overflow:hidden;
Â Â user-select:none;
Â Â -webkit-tap-highlight-color: transparent;
}
.chip:after{
Â Â content:"";
Â Â position:absolute; inset:-40% -60%;
Â Â background: linear-gradient(120deg, transparent 40%, rgba(255,255,255,.55) 50%, transparent 60%);
Â Â transform: rotate(8deg) translateX(-60%);
Â Â animation: sweep 5.2s ease-in-out infinite;
Â Â opacity:.65;
Â Â pointer-events:none;
}
@keyframes sweep{
Â Â 0%{ transform: rotate(8deg) translateX(-60%);}
Â Â 55%{ transform: rotate(8deg) translateX(60%);}
Â Â 100%{ transform: rotate(8deg) translateX(60%);}
}

.soundBtn{
Â Â display:inline-flex; align-items:center; gap:8px;
Â Â padding:10px 14px;
Â Â border-radius:999px;
Â Â border: 1px solid rgba(255,255,255,.72);
Â Â background: linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.54));
Â Â box-shadow: 0 14px 30px rgba(0,0,0,.10);
Â Â font-weight:1000;
Â Â cursor:pointer;
Â Â -webkit-tap-highlight-color: transparent;
Â Â user-select:none;
}
.soundDot{
Â Â width:10px; height:10px; border-radius:999px;
Â Â background: rgba(0,0,0,.22);
Â Â box-shadow: 0 0 0 6px rgba(255,31,184,.14);
}
.soundOn .soundDot{
Â Â background: #17ff7a;
Â Â box-shadow: 0 0 0 6px rgba(23,255,122,.16);
}

/* Carousel */
.viewport{
Â Â flex:1;
Â Â overflow:hidden;
Â Â padding: 10px 14px;

Â Â /* CRITICAL: allow internal overflow children to scroll in flex layout */
Â Â min-height: 0;
}

.track{
Â Â height:100%;
Â Â display:flex;
Â Â gap:14px;
Â Â overflow-x:auto;
Â Â scroll-snap-type: x mandatory;
Â Â -webkit-overflow-scrolling: touch;
Â Â scroll-behavior:smooth;
Â Â padding-bottom: 10px;

Â Â /* CRITICAL: don't block vertical scroll inside slides on iOS */
Â Â touch-action: auto;
}
.track::-webkit-scrollbar{ display:none; }

.slide{
Â Â flex: 0 0 100%;
Â Â height:100%;
Â Â display:flex;
Â Â flex-direction:column;
Â Â gap:12px;

Â Â /* CRITICAL: scroll happens INSIDE each slide */
Â Â overflow-y:auto;
Â Â -webkit-overflow-scrolling: touch;
Â Â touch-action: pan-y;

Â Â /* CRITICAL: flexbox scroll bug fix */
Â Â min-height: 0;

Â Â padding-bottom: max(28px, env(safe-area-inset-bottom));
}

/* Main card with tilt */
.card{
Â Â position:relative;
Â Â background: var(--card);
Â Â border: 1px solid rgba(255,255,255,.72);
Â Â border-radius: var(--r);
Â Â box-shadow: var(--shadowA);
Â Â padding: 18px;

Â Â /* IMPORTANT: let slide scroll, not card */
Â Â overflow: visible;

Â Â transform: perspective(900px) rotateX(var(--rx, 0deg)) rotateY(var(--ry, 0deg));
Â Â transition: transform 120ms ease;
Â Â will-change: transform;

Â Â min-height: 0;
}
.card:before{
Â Â content:"";
Â Â position:absolute; inset:0;
Â Â border-radius: inherit;
Â Â pointer-events:none;
Â Â background:
Â Â Â Â radial-gradient(900px 320px at 20% 0%, rgba(255,255,255,.88), transparent 55%),
Â Â Â Â radial-gradient(700px 260px at 90% 10%, rgba(255,255,255,.55), transparent 60%);
Â Â opacity:.95;
Â Â mix-blend-mode: screen;
}

/* Header typography */
h1{
Â Â margin:0;
Â Â font-size: clamp(34px, 7vw, 56px);
Â Â line-height:1.02;
Â Â letter-spacing:-.9px;
Â Â position:relative;
Â Â z-index:2;
Â Â text-shadow: 0 2px 0 rgba(255,255,255,.55);
}
.sub{
Â Â margin:10px 0 0;
Â Â font-size: 16px;
Â Â line-height:1.55;
Â Â opacity:.95;
Â Â position:relative;
Â Â z-index:2;
Â Â max-width: 60ch;
}

/* Hero stage */
.stage{
Â Â position:relative;
Â Â min-height: 280px;
Â Â margin-top: 14px;
Â Â border-radius: 24px;
Â Â background:
Â Â Â Â radial-gradient(240px 140px at 25% 18%, rgba(255,255,255,.45), transparent 60%),
Â Â Â Â radial-gradient(320px 220px at 85% 75%, rgba(255,255,255,.24), transparent 65%),
Â Â Â Â linear-gradient(135deg, rgba(255,255,255,.32), rgba(255,255,255,.12));
Â Â border: 1px solid rgba(255,255,255,.52);
Â Â box-shadow: var(--shadowB);
Â Â overflow:hidden;
Â Â z-index:2;
}

/* Neon green accent stripe */
.neon{
Â Â position:absolute;
Â Â left:-20%;
Â Â top:22%;
Â Â width:160%;
Â Â height:28px;
Â Â transform: rotate(-10deg);
Â Â background: linear-gradient(90deg, transparent, rgba(23,255,122,.8), transparent);
Â Â opacity:.40;
Â Â filter: blur(0.2px);
}

/* Floating 3D assets */
.asset{
Â Â position:absolute;
Â Â width: 150px;
Â Â height:auto;
Â Â filter: drop-shadow(0 22px 28px rgba(0,0,0,.22));
Â Â transform: translate3d(0,0,0);
Â Â animation: floatA 6.6s ease-in-out infinite;
Â Â user-select:none;
Â Â pointer-events:none;
}
.asset.small{ width: 96px; animation-duration: 7.4s; }
.asset.tiny{ width: 70px; animation-duration: 8.1s; }
@keyframes floatA{ 0%,100%{ translate:0 0; } 50%{ translate:0 -14px; } }

.a-hero{ left: 50%; top: 50%; transform: translate(-50%,-50%); width: 190px; animation-duration: 6.2s; }
.a-radio{ left: 10%; top: 56%; width: 130px; animation-duration: 7.2s; }
.a-cd1{ left: 68%; top: 18%; width: 120px; animation-duration: 7.8s; }
.a-cd2{ left: 16%; top: 16%; width: 90px; animation-duration: 8.2s; }
.a-heart{ left: 76%; top: 62%; width: 90px; animation-duration: 6.8s; }
.a-star{ left: 38%; top: 10%; width: 76px; animation-duration: 7.1s; }
.a-flower{ left: 6%; top: 70%; width: 86px; animation-duration: 8.6s; }

/* Pills and 3D buttons */
.pills{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 12px; position:relative; z-index:2; }
.pill{
Â Â padding:10px 12px;
Â Â border-radius:999px;
Â Â font-weight:1100;
Â Â font-size:14px;
Â Â background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.58));
Â Â border: 1px solid rgba(255,255,255,.75);
Â Â box-shadow: var(--shadowB);
}

.btnRow{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 14px; position:relative; z-index:2; }

.btn3d{
Â Â display:inline-flex; align-items:center; justify-content:center; gap:10px;
Â Â padding:14px 16px;
Â Â border-radius: 18px;
Â Â text-decoration:none;
Â Â font-weight: 1200;
Â Â border: 1px solid rgba(255,255,255,.55);
Â Â box-shadow: var(--shadowC), 0 18px 45px rgba(0,0,0,.16);
Â Â transform: translateY(0);
Â Â transition: transform .12s ease, box-shadow .12s ease;
Â Â user-select:none;
Â Â -webkit-tap-highlight-color: transparent;
Â Â cursor:pointer;
Â Â position:relative;
Â Â overflow:hidden;
}
.btn3d.primary{
Â Â color:#fff;
Â Â background:
Â Â Â Â radial-gradient(180px 90px at 25% 20%, rgba(255,255,255,.35), transparent 55%),
Â Â Â Â linear-gradient(180deg, var(--hot), var(--hot2));
}
.btn3d.ghost{
Â Â color: var(--ink);
Â Â background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.62));
}
.btn3d:active{
Â Â transform: translateY(8px);
Â Â box-shadow: 0 8px 0 rgba(140,0,90,.16), 0 12px 26px rgba(0,0,0,.14);
}
.btn3d:after{
Â Â content:"";
Â Â position:absolute; inset:-40% -60%;
Â Â background: linear-gradient(120deg, transparent 40%, rgba(255,255,255,.45) 50%, transparent 60%);
Â Â transform: rotate(8deg) translateX(-60%);
Â Â animation: sweep 4.8s ease-in-out infinite;
Â Â opacity:.65;
Â Â pointer-events:none;
}

/* Countdown */
.countdown{ display:grid; grid-template-columns: repeat(4, 1fr); gap:10px; margin-top:12px; position:relative; z-index:2; }
.timebox{
Â Â border-radius: 18px;
Â Â padding: 12px 10px;
Â Â text-align:center;
Â Â background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.62));
Â Â border: 1px solid rgba(255,255,255,.78);
Â Â box-shadow: var(--shadowB);
}
.num{ font-size: 24px; font-weight: 1300; letter-spacing:-.4px; }
.lab{ font-size:12px; font-weight: 1100; opacity:.86; letter-spacing:.9px; text-transform:uppercase; margin-top:3px; }

/* Options UI */
.sectionTitle{
Â Â margin: 12px 0 8px;
Â Â font-size: 18px;
Â Â font-weight: 1300;
Â Â letter-spacing:-.2px;
Â Â position:relative;
Â Â z-index:2;
}
.options{ display:flex; flex-wrap:wrap; gap:10px; position:relative; z-index:2; }

.opt{
Â Â display:inline-flex;
Â Â align-items:center;
Â Â gap:10px;
Â Â padding: 12px 14px;
Â Â border-radius: 999px;
Â Â background:
Â Â Â Â radial-gradient(160px 90px at 30% 20%, rgba(255,255,255,.55), transparent 55%),
Â Â Â Â linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.60));
Â Â border: 1px solid rgba(255,255,255,.78);
Â Â box-shadow: 0 16px 0 rgba(120,0,80,.12), var(--shadowB);
Â Â font-weight: 1200;
Â Â cursor:pointer;
Â Â user-select:none;
Â Â -webkit-tap-highlight-color: transparent;
Â Â transition: transform .12s ease, box-shadow .12s ease;
}
.opt:active{
Â Â transform: translateY(7px);
Â Â box-shadow: 0 8px 0 rgba(120,0,80,.12), 0 12px 26px rgba(0,0,0,.14);
}
.opt input{ display:none; }
.opt[data-on="1"]{
Â Â outline: 3px solid rgba(23,255,122,.45);
Â Â box-shadow: 0 16px 0 rgba(23,255,122,.16), 0 18px 45px rgba(0,0,0,.16);
}

/* Inputs */
label.small{ display:block; margin: 10px 0 6px; font-weight:1300; position:relative; z-index:2; }
input.text, textarea.text{
Â Â width:100%;
Â Â border-radius: 18px;
Â Â border: 1px solid rgba(255,255,255,.78);
Â Â padding: 12px 12px;
Â Â font-size: 15px;
Â Â background: rgba(255,255,255,.82);
Â Â box-shadow: var(--shadowB);
Â Â outline:none;
Â Â position:relative;
Â Â z-index:2;
}
textarea.text{ min-height: 96px; resize: vertical; }

/* Progress + nav */
.nav{
Â Â padding: 4px 14px 10px;
Â Â display:flex;
Â Â gap:10px;
Â Â align-items:center;
Â Â justify-content:space-between;

Â Â /* helps keep flex sizing predictable */
Â Â flex: 0 0 auto;
}
.dots{ display:flex; gap:8px; align-items:center; }
.dot{
Â Â width:10px; height:10px; border-radius:999px;
Â Â background: rgba(255,255,255,.55);
Â Â border: 1px solid rgba(255,255,255,.75);
Â Â box-shadow: 0 10px 18px rgba(0,0,0,.10);
}
.dot.on{ background: rgba(23,255,122,.85); }

/* Loading screen */
.loading{
Â Â position:fixed; inset:0; z-index:50;
Â Â display:flex; flex-direction:column; align-items:center; justify-content:center;
Â Â gap:14px;
Â Â background:
Â Â Â Â radial-gradient(900px 700px at 20% 10%, rgba(255,255,255,.85) 0%, transparent 55%),
Â Â Â Â linear-gradient(135deg, var(--lav), var(--baby) 30%, var(--pink) 65%, var(--hot2));
Â Â pointer-events:none;
}
.loadCard{
Â Â width:min(520px, 92vw);
Â Â border-radius: 30px;
Â Â padding: 18px;
Â Â background: rgba(255,255,255,.62);
Â Â border: 1px solid rgba(255,255,255,.76);
Â Â box-shadow: var(--shadowA);
Â Â text-align:center;
Â Â position:relative;
Â Â overflow:hidden;
}
.loadCard:before{
Â Â content:"";
Â Â position:absolute; inset:0;
Â Â background:
Â Â Â Â radial-gradient(700px 260px at 20% 0%, rgba(255,255,255,.85), transparent 55%),
Â Â Â Â radial-gradient(700px 260px at 90% 10%, rgba(255,255,255,.55), transparent 60%);
Â Â opacity:.9;
Â Â pointer-events:none;
Â Â mix-blend-mode: screen;
}
.loadTitle{
Â Â font-size: 28px;
Â Â font-weight: 1400;
Â Â letter-spacing:-.6px;
Â Â margin: 0;
Â Â position:relative;
Â Â z-index:2;
}
.loadSub{
Â Â margin: 8px 0 0;
Â Â opacity:.92;
Â Â position:relative;
Â Â z-index:2;
Â Â font-weight: 1100;
}
.bar{
Â Â margin: 14px auto 0;
Â Â height: 14px;
Â Â width: 100%;
Â Â border-radius: 999px;
Â Â background: rgba(255,255,255,.55);
Â Â border: 1px solid rgba(255,255,255,.76);
Â Â overflow:hidden;
Â Â position:relative;
Â Â z-index:2;
Â Â box-shadow: var(--shadowB);
}
.bar > i{
Â Â display:block;
Â Â height:100%;
Â Â width: 35%;
Â Â border-radius: 999px;
Â Â background: linear-gradient(90deg, rgba(23,255,122,.85), rgba(255,31,184,.85));
Â Â animation: loadMove 1.05s ease-in-out infinite;
}
@keyframes loadMove{
Â Â 0%{ transform: translateX(-20%); width: 30%; }
Â Â 50%{ transform: translateX(65%); width: 45%; }
Â Â 100%{ transform: translateX(-20%); width: 30%; }
}

/* Confetti/hearts layer */
.fx{
Â Â position:fixed; inset:0; pointer-events:none; z-index:40;
Â Â overflow:hidden;
}
.fx span{
Â Â position:absolute;
Â Â font-size: 18px;
Â Â filter: drop-shadow(0 10px 12px rgba(0,0,0,.18));
Â Â animation: popFly 900ms ease-out forwards;
Â Â opacity:0;
}
@keyframes popFly{
Â Â 0%{ transform: translate(0,0) scale(.6); opacity:0; }
Â Â 15%{ opacity:1; }
Â Â 100%{ transform: translate(var(--dx), var(--dy)) rotate(var(--rot)) scale(1.1); opacity:0; }
}

/* Results */
.resultsGrid{
Â Â display:grid;
Â Â gap:10px;
Â Â position:relative;
Â Â z-index:2;
}
.meter{
Â Â border-radius: 18px;
Â Â padding: 12px;
Â Â background: rgba(255,255,255,.78);
Â Â border: 1px solid rgba(255,255,255,.82);
Â Â box-shadow: var(--shadowB);
Â Â overflow:hidden;
Â Â position:relative;
}
.meterTop{
Â Â display:flex; justify-content:space-between; gap:10px; align-items:baseline;
Â Â font-weight:1300;
}
.meterTop small{ opacity:.85; font-weight:1100; }
.rail{
Â Â margin-top:10px;
Â Â height: 16px;
Â Â border-radius: 999px;
Â Â background: rgba(0,0,0,.08);
Â Â overflow:hidden;
Â Â border: 1px solid rgba(255,255,255,.65);
}
.fill{
Â Â height:100%;
Â Â width:0%;
Â Â border-radius: 999px;
Â Â background: linear-gradient(90deg, rgba(23,255,122,.85), rgba(255,31,184,.85));
Â Â transition: width 520ms ease;
}
.tinyNote{
Â Â margin-top:10px;
Â Â opacity:.92;
Â Â font-weight:1100;
Â Â position:relative;
Â Â z-index:2;
}

/* mobile type safety */
@media (max-width: 480px) {
Â Â body { font-size: 16px; }
Â Â h1 { font-size: 34px; line-height: 1.05; }
Â Â h2 { font-size: 22px; }
}

/* Chrome button style (keep) */
.btn3d.chrome{
Â Â color:#240617;
Â Â background:
Â Â Â Â radial-gradient(160px 90px at 22% 18%, rgba(255,255,255,.95), transparent 58%),
Â Â Â Â radial-gradient(220px 120px at 80% 78%, rgba(255,255,255,.55), transparent 65%),
Â Â Â Â linear-gradient(135deg, rgba(230,230,255,.95), rgba(255,255,255,.65) 35%, rgba(255,120,214,.25) 70%, rgba(180,255,220,.35));
Â Â border: 1px solid rgba(255,255,255,.85);
Â Â box-shadow: 0 18px 0 rgba(140,0,90,.12), 0 18px 45px rgba(0,0,0,.16);
}

/* IMPORTANT: overlays never block taps */
.pattern, .floaters, .fx, .blob, .neon, .stage:before, .card:before { pointer-events:none; }
button, a, .btn3d, .opt, input, textarea { pointer-events:auto; }
</style>
</head>

<body>
<div class="pattern" aria-hidden="true"></div>
<div class="floaters" aria-hidden="true">
<div class="blob b1"></div>
<div class="blob b2"></div>
<div class="blob b3"></div>
</div>

<!-- Hype loading screen -->
<div class="loading" id="loading">
<div class="loadCard">
<h2 class="loadTitle">Launching Galentineâ€™sâ€¦ ğŸ’–ğŸš€</h2>
<div class="loadSub">Loading the drop: chrome + CDs + chaos</div>
<div class="bar"><i></i></div>
</div>
</div>

<div class="fx" id="fx"></div>

<div class="app">
<div class="topbar">
<div class="chip">ğŸ’¿ Galentineâ€™s Launch</div>
<button class="soundBtn" id="soundBtn" type="button" aria-label="Toggle sound">
<span class="soundDot" aria-hidden="true"></span>
<span id="soundLabel">Sound: Off</span>
</button>
</div>

<div class="viewport">
<div class="track" id="track">

<!-- Slide 1 -->
<section class="slide">
<div class="card tilt">
<h1>Valentineâ€™s Day<br>for the Girlies ğŸ’˜</h1>
<p class="sub">This is a limited drop. If youâ€™re coming, say it with your chest. ğŸ’…</p>

<div class="stage" id="stage1">
<div class="neon"></div>

<img class="asset a-hero" src="assets/hero-phone.png" alt="" />
<img class="asset a-radio" src="assets/radio.png" alt="" />
<img class="asset a-cd1" src="assets/cd1.png" alt="" />
<img class="asset small a-cd2" src="assets/cd2.png" alt="" />
<img class="asset small a-heart" src="assets/chrome-heart.png" alt="" />
<img class="asset tiny a-star" src="assets/star.png" alt="" />
<img class="asset tiny a-flower" src="assets/flower.png" alt="" />
</div>

<div class="btnRow">
<button class="btn3d primary" type="button" id="startBtn">Tap to Enter ğŸ’–</button>
<button class="btn3d ghost" type="button" id="peekBtn">Peek the Deets ğŸ‘€</button>
</div>
</div>
</section>

<!-- Slide 2 -->
<section class="slide">
<div class="card tilt">
<h1>The Deets âœ¨</h1>
<p class="sub">Bring something homemade or bought. Either way, bring your best energy.</p>

<div class="pills">
<div class="pill">ğŸ“… Feb 13</div>
<div class="pill">ğŸ•‘ 2:00 PM</div>
<div class="pill">ğŸ“ Jersey City</div>
<div class="pill">ğŸ“ Potluck / Buy-luck</div>
</div>

<div class="sectionTitle" style="margin-top:14px;">Countdown â³</div>
<div class="countdown">
<div class="timebox"><div class="num" id="dd">--</div><div class="lab">Days</div></div>
<div class="timebox"><div class="num" id="hh">--</div><div class="lab">Hours</div></div>
<div class="timebox"><div class="num" id="mm">--</div><div class="lab">Min</div></div>
<div class="timebox"><div class="num" id="ss">--</div><div class="lab">Sec</div></div>
</div>

<!-- âœ… Spotify link (3D button) -->
<div class="btnRow">
<a class="btn3d chrome" href="https://open.spotify.com/playlist/15r9CUj51Xte5bt5ctVj8l?si=R99FGXYPTcaUEtyFsM11SQ&pi=uaBWm0O1SMWq5" target="_blank" rel="noopener">
Â Â ğŸ§ Open the Galentineâ€™s Playlist
</a>
</div>

<div class="btnRow">
<button class="btn3d primary" type="button" id="toVote">Next: Vote ğŸ’¿</button>
<button class="btn3d ghost" type="button" id="back1">Back</button>
</div>
</div>
</section>

<!-- Slide 3 -->
<section class="slide">
<div class="card tilt">
<h1>Vote Like a Popstar ğŸ¤</h1>
<p class="sub">Tap choices. They should feel like stickersâ€”because they are.</p>

<div class="sectionTitle">Activity (pick any)</div>
<div class="options" data-group="activity">
<div class="opt" data-type="check" data-name="activity" data-value="Brunch">ğŸ³ Brunch</div>
<div class="opt" data-type="check" data-name="activity" data-value="Karaoke">ğŸ¤ Karaoke</div>
<div class="opt" data-type="check" data-name="activity" data-value="Spa">ğŸ§–â€â™€ï¸ Spa</div>
<div class="opt" data-type="check" data-name="activity" data-value="Game night">ğŸ² Game night</div>
</div>

<div class="sectionTitle">Drinks (pick one)</div>
<div class="options" data-group="drinks">
<div class="opt" data-type="radio" data-name="drinks" data-value="Mocktails">ğŸ“ Mocktails</div>
<div class="opt" data-type="radio" data-name="drinks" data-value="Cocktails">ğŸ¥‚ Cocktails</div>
<div class="opt" data-type="radio" data-name="drinks" data-value="Both">âœ¨ Both</div>
</div>

<div class="sectionTitle">Outfit / Theme (pick any)</div>
<div class="options" data-group="outfit">
<div class="opt" data-type="check" data-name="outfit" data-value="All pink everything">ğŸ’– All pink</div>
<div class="opt" data-type="check" data-name="outfit" data-value="Red + pink">ğŸ’‹ Red + pink</div>
<div class="opt" data-type="check" data-name="outfit" data-value="Cozy slay">ğŸ§¸ Cozy slay</div>
<div class="opt" data-type="check" data-name="outfit" data-value="Y2K glam">ğŸ’¿ Y2K glam</div>
</div>

<div class="btnRow">
<button class="btn3d primary" type="button" id="toExtras">Next: Extras âœ¨</button>
<button class="btn3d ghost" type="button" id="back2">Back</button>
</div>
</div>
</section>

<!-- Slide 4 -->
<section class="slide">
<div class="card tilt">
<h1>Extras ğŸ˜‡</h1>
<p class="sub">Be honest. Are you bringing a +1? And what are you contributing to the snack economy?</p>

<label class="small">Plus one?</label>
<div class="options" data-group="plusone">
<div class="opt" data-type="radio" data-name="plusone" data-value="No plus one">No +1</div>
<div class="opt" data-type="radio" data-name="plusone" data-value="Yes +1">Yes +1</div>
</div>

<label class="small" for="bring">What are you bringing? (Potluck / Buy-luck)</label>
<input class="text" id="bring" type="text" placeholder="cupcakes / chips / fruit / drinks / vibes" />

<label class="small" for="notes">Notes / allergies / song request</label>
<textarea class="text" id="notes" placeholder="Drop the tea hereâ€¦ respectfully."></textarea>

<div class="btnRow">
<button class="btn3d primary" type="button" id="toRsvp">Next: RSVP ğŸ’Œ</button>
<button class="btn3d ghost" type="button" id="back3">Back</button>
</div>
</div>
</section>

<!-- Slide 5 -->
<section class="slide">
<div class="card tilt">
<h1>RSVP ğŸ’Œ</h1>
<p class="sub">Submit it. Then check the live vote results like itâ€™s the Billboard charts.</p>

<label class="small" for="name">Your name *</label>
<input class="text" id="name" type="text" placeholder="Nia / Kayla / Queen ğŸ‘‘" required />

<div class="sectionTitle">RSVP status *</div>
<div class="options" data-group="status">
<div class="opt" data-type="radio" data-name="status" data-value="Iâ€™m in ğŸ’–">Iâ€™m in ğŸ’–</div>
<div class="opt" data-type="radio" data-name="status" data-value="Maybe ğŸ¤">Maybe ğŸ¤</div>
<div class="opt" data-type="radio" data-name="status" data-value="Canâ€™t ğŸ˜­">Canâ€™t ğŸ˜­</div>
</div>

<div class="btnRow">
<button class="btn3d primary" type="button" id="submitBtn">Submit RSVP ğŸ’–</button>
<button class="btn3d ghost" type="button" id="refreshResults">Refresh Results</button>
</div>

<div class="tinyNote" id="saveMsg" style="display:none;">Saved ğŸ’– If you change your mind, submit again.</div>

<div class="sectionTitle" style="margin-top:14px;">Live Results ğŸ“Š</div>
<div class="resultsGrid" id="resultsGrid">
<div class="meter">
<div class="meterTop"><span>Total RSVPs</span><small id="totalCount">0</small></div>
<div class="rail"><div class="fill" id="totalFill"></div></div>
</div>
<div class="meter">
<div class="meterTop"><span>Top Activity</span><small id="topActivity">â€”</small></div>
<div class="rail"><div class="fill" id="activityFill"></div></div>
</div>
<div class="meter">
<div class="meterTop"><span>Top Drink</span><small id="topDrink">â€”</small></div>
<div class="rail"><div class="fill" id="drinksFill"></div></div>
</div>
<div class="meter">
<div class="meterTop"><span>Top Outfit</span><small id="topOutfit">â€”</small></div>
<div class="rail"><div class="fill" id="outfitFill"></div></div>
</div>
</div>

<div class="tinyNote" id="detailDump"></div>
</div>

<!-- Hidden iframe form POST (reliable, no CORS issues) -->
<form id="hiddenForm"
method="POST"
action="https://script.google.com/macros/s/AKfycbzc_x8_hAQSXUCZnyyRHsVb_anqCFrO2NhV2NwaomycAAHL7t-sgfsErnzxaTmey9BpCw/exec"
target="sink"
style="display:none;">
<input name="name" id="f_name" />
<input name="status" id="f_status" />
<input name="availability" id="f_availability" />
<input name="drinks" id="f_drinks" />
<input name="plusone" id="f_plusone" />
<input name="bring" id="f_bring" />
<input name="notes" id="f_notes" />
<div id="checks"></div>

<input type="hidden" name="event" value="Galentineâ€™s Day" />
<input type="hidden" name="host" value="Aminah" />
<input type="hidden" name="city" value="Jersey City" />
<input type="hidden" name="datetime" value="Feb 13 @ 2:00 PM" />
</form>
<iframe name="sink" style="display:none"></iframe>
</section>

</div>
</div>

<div class="nav">
<div class="dots" id="dots"></div>
<div class="chip" id="stepLabel">Step 1 / 5</div>
</div>
</div>

<script>
/* === CONFIG === */
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbzc_x8_hAQSXUCZnyyRHsVb_anqCFrO2NhV2NwaomycAAHL7t-sgfsErnzxaTmey9BpCw/exec";
const EVENT_LOCAL = { month: 2, day: 13, hour: 14, minute: 0 };
  function setVH(){
  document.documentElement.style.setProperty('--vh', window.innerHeight + 'px');
}
setVH();
window.addEventListener('resize', setVH);

/* === LOADING SCREEN (safe + never stuck) === */
function hideLoader(){
const loading = document.getElementById("loading");
if(!loading) return;
loading.style.transition = "opacity 220ms ease";
loading.style.opacity = "0";
setTimeout(()=> { try{ loading.remove(); }catch(e){ loading.style.display="none"; } }, 260);
}
document.addEventListener("DOMContentLoaded", () => setTimeout(hideLoader, 900));
window.addEventListener("load", () => setTimeout(hideLoader, 1200));
setTimeout(hideLoader, 2500);

/* === SOUND (WebAudio blips + sparkles) === */
let soundOn = false;
const soundBtn = document.getElementById('soundBtn');
const soundLabel = document.getElementById('soundLabel');
let audioCtx = null;

function ensureAudio(){
if(!audioCtx){
audioCtx = new (window.AudioContext || window.webkitAudioContext)();
}
if(audioCtx.state === "suspended") audioCtx.resume();
}

function blip(freq=520, ms=60, type="sine", gain=0.045){
if(!soundOn) return;
ensureAudio();
const t0 = audioCtx.currentTime;
const o = audioCtx.createOscillator();
const g = audioCtx.createGain();
o.type = type;
o.frequency.value = freq;
g.gain.setValueAtTime(0.0001, t0);
g.gain.exponentialRampToValueAtTime(gain, t0 + 0.01);
g.gain.exponentialRampToValueAtTime(0.0001, t0 + ms/1000);
o.connect(g).connect(audioCtx.destination);
o.start(t0);
o.stop(t0 + ms/1000);
}

function sparkle(){
if(!soundOn) return;
blip(740, 70, "triangle", 0.04);
setTimeout(()=>blip(980, 60, "sine", 0.035), 60);
setTimeout(()=>blip(1220, 70, "triangle", 0.03), 120);
}

soundBtn.addEventListener('click', () => {
soundOn = !soundOn;
soundBtn.classList.toggle('soundOn', soundOn);
soundLabel.textContent = soundOn ? "Sound: On" : "Sound: Off";
// user gesture => allowed on mobile
ensureAudio();
blip(420, 80, "sine", 0.05);
});

/* === SWIPE + BUTTON NAV === */
const track = document.getElementById('track');
const slides = Array.from(document.querySelectorAll('.slide'));
const dots = document.getElementById('dots');
const stepLabel = document.getElementById('stepLabel');

slides.forEach((_, i) => {
const d = document.createElement('div');
d.className = 'dot' + (i===0 ? ' on' : '');
dots.appendChild(d);
d.addEventListener('click', () => goTo(i));
});

function currentIndex(){
const x = track.scrollLeft;
const w = track.clientWidth + 14;
return Math.round(x / w);
}

function setUI(i){
Array.from(dots.children).forEach((el, idx) => el.classList.toggle('on', idx===i));
stepLabel.textContent = `Step ${i+1} / ${slides.length}`;
}

function goTo(i){
const w = track.clientWidth + 14;
track.scrollTo({ left: i * w, behavior: 'smooth' });
setUI(i);
}

track.addEventListener('scroll', () => setUI(currentIndex()), { passive:true });

document.getElementById('startBtn').addEventListener('click', () => { sparkle(); burstFX(22); goTo(1); });
document.getElementById('peekBtn').addEventListener('click', () => { blip(520); goTo(1); });
document.getElementById('toVote').addEventListener('click', () => { blip(560); goTo(2); });
document.getElementById('toExtras').addEventListener('click', () => { blip(560); goTo(3); });
document.getElementById('toRsvp').addEventListener('click', () => { blip(560); goTo(4); });

document.getElementById('back1').addEventListener('click', () => { blip(440); goTo(0); });
document.getElementById('back2').addEventListener('click', () => { blip(440); goTo(1); });
document.getElementById('back3').addEventListener('click', () => { blip(440); goTo(2); });

/* === OPTIONS === */
const state = {
activity: new Set(),
outfit: new Set(),
drinks: "",
plusone: "",
status: ""
};

function toggleOpt(el){
const type = el.dataset.type;
const name = el.dataset.name;
const val = el.dataset.value;

if(type === "check"){
const set = state[name];
if(set.has(val)){ set.delete(val); el.dataset.on="0"; blip(420); }
else{ set.add(val); el.dataset.on="1"; sparkle(); }
} else {
state[name] = val;
const parent = el.parentElement;
Array.from(parent.querySelectorAll('.opt')).forEach(o => o.dataset.on = (o===el ? "1" : "0"));
sparkle();
}
}

document.querySelectorAll('.opt').forEach(el => {
el.dataset.on = "0";
el.addEventListener('click', () => toggleOpt(el));
});

/* === COUNTDOWN === */
const dd = document.getElementById('dd');
const hh = document.getElementById('hh');
const mm = document.getElementById('mm');
const ss = document.getElementById('ss');

function getTarget(){
const now = new Date();
const year = now.getFullYear();
const targetThisYear = new Date(year, EVENT_LOCAL.month - 1, EVENT_LOCAL.day, EVENT_LOCAL.hour, EVENT_LOCAL.minute, 0);
return (targetThisYear - now > 0) ? targetThisYear : new Date(year + 1, EVENT_LOCAL.month - 1, EVENT_LOCAL.day, EVENT_LOCAL.hour, EVENT_LOCAL.minute, 0);
}
let target = getTarget();

function tick(){
const n = new Date();
let diff = target - n;
if(diff < 0) { target = getTarget(); diff = target - n; }

const d = Math.floor(diff / (1000*60*60*24));
diff -= d*(1000*60*60*24);
const h = Math.floor(diff / (1000*60*60));
diff -= h*(1000*60*60);
const m = Math.floor(diff / (1000*60));
diff -= m*(1000*60);
const s = Math.floor(diff / 1000);

dd.textContent = d;
hh.textContent = h;
mm.textContent = m;
ss.textContent = s;
}
tick();
setInterval(tick, 1000);

/* === TILT === */
const tilts = Array.from(document.querySelectorAll('.tilt'));
let tiltRX = 0, tiltRY = 0;

function applyTilt(){
tilts.forEach(card => {
card.style.setProperty('--rx', `${tiltRX}deg`);
card.style.setProperty('--ry', `${tiltRY}deg`);
});
}

window.addEventListener('deviceorientation', (e) => {
const g = Math.max(-18, Math.min(18, e.gamma || 0));
const b = Math.max(-18, Math.min(18, e.beta || 0));
tiltRY = g * 0.18;
tiltRX = (b - 10) * 0.12;
applyTilt();
}, { passive:true });

window.addEventListener('mousemove', (e) => {
const x = (e.clientX / window.innerWidth) - 0.5;
const y = (e.clientY / window.innerHeight) - 0.5;
tiltRY = x * 6;
tiltRX = -y * 5;
applyTilt();
}, { passive:true });

/* === CONFETTI / HEARTS === */
const fx = document.getElementById('fx');
function burstFX(count=18){
const emojis = ["ğŸ’–","âœ¨","ğŸ’¿","ğŸ’˜","ğŸŒ¸","â­ï¸","ğŸ«§","ğŸ’…"];
const cx = Math.random() * window.innerWidth;
const cy = Math.random() * window.innerHeight * 0.6 + 80;

for(let i=0;i<count;i++){
const s = document.createElement('span');
s.textContent = emojis[Math.floor(Math.random()*emojis.length)];
s.style.left = cx + "px";
s.style.top = cy + "px";
const dx = (Math.random()*2 - 1) * 220;
const dy = (Math.random()*-1) * (260 + Math.random()*200);
const rot = (Math.random()*2 - 1) * 240;
s.style.setProperty('--dx', dx + "px");
s.style.setProperty('--dy', dy + "px");
s.style.setProperty('--rot', rot + "deg");
s.style.fontSize = (14 + Math.random()*18) + "px";
fx.appendChild(s);
requestAnimationFrame(()=>{ s.style.opacity = "1"; });
setTimeout(()=> s.remove(), 950);
}
}

/* === SUBMIT RSVP (POST to iframe) === */
const hiddenForm = document.getElementById('hiddenForm');
const checksDiv = document.getElementById('checks');
const saveMsg = document.getElementById('saveMsg');

function setHidden(id, val){ document.getElementById(id).value = val || ""; }

document.getElementById('submitBtn').addEventListener('click', () => {
const name = document.getElementById('name').value.trim();
if(!name){ burstFX(10); blip(220,90,"sine",0.06); alert("Put your name, bestie ğŸ˜­"); return; }
if(!state.status){ burstFX(10); blip(220,90,"sine",0.06); alert("Pick your RSVP status ğŸ’–"); return; }

setHidden('f_name', name);
setHidden('f_status', state.status);
setHidden('f_availability', "Feb 13 @ 2PM");
setHidden('f_drinks', state.drinks);
setHidden('f_plusone', state.plusone);
setHidden('f_bring', document.getElementById('bring').value.trim());
setHidden('f_notes', document.getElementById('notes').value.trim());

checksDiv.innerHTML = "";
for(const v of state.activity){
const i = document.createElement('input');
i.type="hidden"; i.name="activity"; i.value=v;
checksDiv.appendChild(i);
}
for(const v of state.outfit){
const i = document.createElement('input');
i.type="hidden"; i.name="outfit"; i.value=v;
checksDiv.appendChild(i);
}

sparkle();
burstFX(28);
hiddenForm.submit();
saveMsg.style.display = "block";
setTimeout(fetchResults, 900);
});

/* === RESULTS DASHBOARD (JSONP) === */
const totalCount = document.getElementById('totalCount');
const totalFill = document.getElementById('totalFill');
const topActivity = document.getElementById('topActivity');
const topDrink = document.getElementById('topDrink');
const topOutfit = document.getElementById('topOutfit');
const activityFill = document.getElementById('activityFill');
const drinksFill = document.getElementById('drinksFill');
const outfitFill = document.getElementById('outfitFill');
const detailDump = document.getElementById('detailDump');

function topKey(obj){
let bestK = "â€”", bestV = 0;
for(const k in obj){
if(obj[k] > bestV){ bestV = obj[k]; bestK = k; }
}
return { key: bestK, val: bestV };
}
function pct(n, total){
if(!total) return 0;
return Math.round((n/total)*100);
}

function renderResults(data){
const total = data.total || 0;
totalCount.textContent = String(total);
totalFill.style.width = Math.min(100, total*8) + "%";

const a = topKey(data.activity || {});
const d = topKey(data.drinks || {});
const o = topKey(data.outfit || {});

const aPct = pct(a.val, total);
const dPct = pct(d.val, total);
const oPct = pct(o.val, total);

topActivity.textContent = `${a.key} â€” ${a.val} (${aPct}%)`;
topDrink.textContent = `${d.key} â€” ${d.val} (${dPct}%)`;
topOutfit.textContent = `${o.key} â€” ${o.val} (${oPct}%)`;

activityFill.style.width = aPct + "%";
drinksFill.style.width = dPct + "%";
outfitFill.style.width = oPct + "%";

const sTop = topKey(data.status || {});
detailDump.textContent = total
? `Leading status: ${sTop.key} â€” ${sTop.val} (${pct(sTop.val,total)}%).`
: "No votes yet. Be the first icon. ğŸ’…";
}

function fetchResults(){
const cb = "cb_" + Math.random().toString(16).slice(2);
const script = document.createElement('script');

window[cb] = (data) => {
try { renderResults(data || {}); }
finally {
try{ delete window[cb]; }catch(e){ window[cb]=undefined; }
script.remove();
}
};

script.src = `${WEB_APP_URL}?action=results&callback=${cb}&t=${Date.now()}`;
script.onerror = () => {
detailDump.textContent = "Results couldnâ€™t load (yet). Try refresh.";
script.remove();
};
document.body.appendChild(script);
}

document.getElementById('refreshResults').addEventListener('click', () => {
blip(520); fetchResults();
});

setTimeout(fetchResults, 1100);

/* === MOBILE FIX: scroll + taps + safe height === */
:root { --vh: 100vh; }

/* keep story mode but allow vertical content */
.app { height: var(--vh); }

.viewport{
  flex: 1;
  overflow: hidden;
}

/* horizontal swipe container */
.track{
  height: 100%;
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  touch-action: pan-x; /* allow swiping */
}

/* IMPORTANT: slides must be scrollable vertically */
.slide{
  min-height: 100%;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  padding-bottom: max(28px, env(safe-area-inset-bottom));
  height: 100%;
overflow-y: auto;
-webkit-overflow-scrolling: touch;
touch-action: pan-y;
padding-bottom: max(28px, env(safe-area-inset-bottom));
}

/* Make sure clickable UI is clickable */
.btn3d, .opt, button, a { pointer-events: auto; }

/* Make sure decorative layers NEVER steal taps */
.pattern, .floaters, .fx { pointer-events: none !important; }
  
</script>
</body>
</html>
